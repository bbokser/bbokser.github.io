<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>On the Optimal Design of Cantilever Beams | Ben Bokser's Blog</title>
<meta name=keywords content="mechanical"><meta name=description content="The Problem
Let&rsquo;s say we need to design a structural section of a robot arm, as shown.

We&rsquo;ve been given a few requirements:

The mass of the component must be minimized at all costs.
The length of the link must be 300 mm.
The maximum allowed deflection (caused by the component) is 1 mm.
The combined mass of the maximum payload and end-effector is 30 kg.
The combined center of mass of the payload and end-effector is 50 mm from the joint.
Both the base and end-effector joints can rotate in any axis.

We are allowed to assume that the arm does not move dynamically, so that our analysis can be static-only."><meta name=author content="Ben Bokser"><link rel=canonical href=https://bbokser.github.io/posts/2023-04-17/><link crossorigin=anonymous href=/assets/css/stylesheet.f5e4015d42de28790ef5dd03b8bc8041968f8b08d6b8a41faded98c8e9953483.css integrity="sha256-9eQBXULeKHkO9d0DuLyAQZaPiwjWuKQfre2YyOmVNIM=" rel="preload stylesheet" as=style><link rel=icon href=https://bbokser.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://bbokser.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://bbokser.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://bbokser.github.io/apple-touch-icon.png><link rel=mask-icon href=https://bbokser.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://bbokser.github.io/posts/2023-04-17/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><meta property="og:url" content="https://bbokser.github.io/posts/2023-04-17/"><meta property="og:site_name" content="Ben Bokser's Blog"><meta property="og:title" content="On the Optimal Design of Cantilever Beams"><meta property="og:description" content="The Problem Let’s say we need to design a structural section of a robot arm, as shown.
We’ve been given a few requirements:
The mass of the component must be minimized at all costs. The length of the link must be 300 mm. The maximum allowed deflection (caused by the component) is 1 mm. The combined mass of the maximum payload and end-effector is 30 kg. The combined center of mass of the payload and end-effector is 50 mm from the joint. Both the base and end-effector joints can rotate in any axis. We are allowed to assume that the arm does not move dynamically, so that our analysis can be static-only."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-04-17T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-17T00:00:00+00:00"><meta property="article:tag" content="Mechanical"><meta property="og:image" content="https://bbokser.github.io/images/2023-04-17/cantilever-force.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://bbokser.github.io/images/2023-04-17/cantilever-force.png"><meta name=twitter:title content="On the Optimal Design of Cantilever Beams"><meta name=twitter:description content="The Problem
Let&rsquo;s say we need to design a structural section of a robot arm, as shown.

We&rsquo;ve been given a few requirements:

The mass of the component must be minimized at all costs.
The length of the link must be 300 mm.
The maximum allowed deflection (caused by the component) is 1 mm.
The combined mass of the maximum payload and end-effector is 30 kg.
The combined center of mass of the payload and end-effector is 50 mm from the joint.
Both the base and end-effector joints can rotate in any axis.

We are allowed to assume that the arm does not move dynamically, so that our analysis can be static-only."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://bbokser.github.io/posts/"},{"@type":"ListItem","position":2,"name":"On the Optimal Design of Cantilever Beams","item":"https://bbokser.github.io/posts/2023-04-17/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"On the Optimal Design of Cantilever Beams","name":"On the Optimal Design of Cantilever Beams","description":"The Problem Let\u0026rsquo;s say we need to design a structural section of a robot arm, as shown.\nWe\u0026rsquo;ve been given a few requirements:\nThe mass of the component must be minimized at all costs. The length of the link must be 300 mm. The maximum allowed deflection (caused by the component) is 1 mm. The combined mass of the maximum payload and end-effector is 30 kg. The combined center of mass of the payload and end-effector is 50 mm from the joint. Both the base and end-effector joints can rotate in any axis. We are allowed to assume that the arm does not move dynamically, so that our analysis can be static-only.\n","keywords":["mechanical"],"articleBody":"The Problem Let’s say we need to design a structural section of a robot arm, as shown.\nWe’ve been given a few requirements:\nThe mass of the component must be minimized at all costs. The length of the link must be 300 mm. The maximum allowed deflection (caused by the component) is 1 mm. The combined mass of the maximum payload and end-effector is 30 kg. The combined center of mass of the payload and end-effector is 50 mm from the joint. Both the base and end-effector joints can rotate in any axis. We are allowed to assume that the arm does not move dynamically, so that our analysis can be static-only.\nSo how do we optimally design this component?\nAbstraction Let’s start by simplifying the situation by only looking at the worst-case scenario, as shown. In this case, maximum bending moment will be acting along the length of the arm and maximum torsion will be acting on it in the axial direction.\nLet’s redraw it as a cantilever beam.\nRemember what we know from the requirements:\n$L_x = 300 \\text{ mm}$ $L_y = 50 \\text{ mm}$ $m = 30 \\text{ kg}$ Choice of Cross-Section Choosing the cross-sectional shape of a cantilever beam is all about maximizing your second moment of area, a major determining factor in both stiffness and strength. On the other hand, you’ll also want to minimize cross-sectional area to ensure that the mass of the beam is as low as possible.\nHow do we maximize second moment of area while minimizing cross-sectional area? Well, second moment of area can be maximized by locating as much of the shape as far away from the neutral axis as possible, whereas area can be minimized by squeezing that shape into a thin band.\nWhen bending is expected to occur in only one axis, the best solution is an I-beam. But because this section of the arm has powered rotation about its longitudinal axis, the beam must be able to support an equal load in any direction perpendicular to its length. As such, the cross-sectional shape of choice is a hollow circle, which has the best ratio of second moment of area to area when considering any neutral axis angle.\nArea of a hollow circle: $$ \\begin{equation} A = \\pi(R^2 - r^2) \\end{equation} $$\nSecond moment of area of a hollow circle: $$ \\begin{equation} I = \\frac{\\pi}{4} (R^4 - r^4) \\end{equation} $$\nSecond polar moment of area of a hollow circle: $$ \\begin{equation} J = \\frac{\\pi}{2} (R^4 - r^4) \\end{equation} $$\nEquations Now that we’ve simplified the problem down to a cantilever beam with a hollow cylindrical cross-section, we can use several equations that will describe deflection and stress acting on the system.\nShear Stress Max shear stress for a beam with a thin-walled tube [1] $$ \\begin{equation} \\tau_{beam, max} = \\frac{2 F}{A} = \\frac{2 F}{\\pi (R^2 - r^2)} \\end{equation} $$\nShear stress due to torsion for a circular shaft [1] $$ \\begin{equation} \\tau_{torsion} = \\frac{M_x R}{J} = \\frac{F L_y R}{\\frac{\\pi}{2} (R^4 - r^4)} \\end{equation} $$\nCombining the two to get overall max shear stress: $$ \\begin{equation} \\tau_{max} = \\tau_{torsion} + \\tau_{beam, max} \\end{equation} $$\nTensile Stress Max tensile stress for a beam due to bending [1] $$ \\begin{equation} \\sigma_{max} = \\frac{M_y c}{I} = \\frac{F L_x R}{\\frac{\\pi}{4} (R^4 - r^4)} \\end{equation} $$\nDeflection Deflection of a cantilever beam due to a force on the tip [2] $$ \\begin{equation} \\delta_{max} = \\frac{F L_x^3}{3 E I} = \\frac{F L_x^3}{3 E \\frac{\\pi}{4} (R^4 - r^4)} \\end{equation} $$\nOptimization To evaluate this problem holistically, I’ve characterized it as an optimization problem. Our objective is to minimize the cross-sectional area (which is proportional to $R^2 - r^2$) as a function of $R$ and $r$.\n$$ \\begin{align} \\min_{R,r} \\quad \u0026 R^2 - r^2 \\\\ \\textrm{s.t.} \\quad \u0026 \\frac{F L_y R}{\\frac{\\pi}{2} (R^4 - r^4)} + \\frac{2 F}{\\pi (R^2 - r^2)} - \\tau_{max} \\leq 0 \\\\ \u0026 F L_x R - \\frac{\\pi}{4} (R^4 - r^4)\\sigma_{max} \\leq 0 \\\\ \u0026 F L_x^3 - 3 E \\frac{\\pi}{4} (R^4 - r^4)\\delta_{limit} \\leq 0 \\\\ \u0026 r - R + t_{min} \\leq 0 \\\\ \u0026 0.01 \\leq R \\leq 0.075 \\\\ \u0026 0.01 \\leq r \\leq 0.075 \\end{align} $$ Where:\n$t_{min}$ is the minimum thickness chosen by the user. (10) is the shear stress constraint. (11) is the bending stress constraint. (12) is the deflection constraint. (13) limits the minimum wall thickness. (14) and (15) define the min/max dimensions. But before we can see how this performs, we need to choose the material.\nMaterials Let’s look at three of the most popular materials when it comes to lightweight structural design: titanium, aluminum, and CFRP. There’s a reason these are the top three: strength-to-weight ratio, AKA specific strength.\nMaterial Young’s Modulus (Pa) Shear Str (Pa) Yield Str (Pa) Density (kg/m^3) Annealed Grade 5 Titanium 110e9 600e6 910e6 4430 Aluminum 7075-T6 70e9 330e6 480e6 2710 CFRP Tube, 0/90 Ply 132e9 102e6 1745e6 1522 Bear in mind that there CFRP comes in many flavors: different ply orientations, grades of fabric quality, types of epoxy, and fabrication methods. As such, there can be an absolutely staggering amount of variation in material properties between one CFRP product and the next. For simplicity, I am choosing one particular product, a commonly used CFRP tube from Dragonplate.\nWe also need to be extra careful when making theoretical predictions about composites because of their anisotropy. In metals like titanium and aluminum, the yield strength and Young’s modulus are basically identical in every direction. But, for example, in CFRP the compressive modulus can be as low as 1/10th of the tensile modulus in some cases. What does this mean for a CFRP beam in bending? Well, a beam in bending is partially in tension and partially in compression, so its equivalent Young’s modulus and yield strength are some combination of the composite’s tensile and compressive moduli and strengths. This is known as flexural modulus and flexural strength, which is what we should be using here. Furthermore, we should be careful to choose the modulus and strength ratings for the correct ply orientation; in this case 0 degrees.\nAs for minimum wall thickness, I found that deciding on $t_{min}$ was very tricky. In the end, I went with the pragmatic approach of checking the minimum tube thicknesses available online for each material. For titanium and aluminum, that’s 0.4064 mm (~1/64\"), whereas for CFRP it’s 0.762 mm (~0.03\").\nNote that in the real world, risk of impact to the sides of the tube may drive your required wall thickness up.\nResults I used NLOPT, a library for nonlinear optimization, to solve the aforementioned optimization problem. The code can be found here.\nMaterial R (mm) r (mm) Thickness (mm) Mass (kg) Annealed Grade 5 Titanium 34.357 33.972 0.385 0.110 Aluminum 7075-T6 39.463 39.063 0.400 0.0798 CFRP Tube, 0/90 Ply 26.442 25.722 0.719 0.0538 Analysis After looking at the equations from earlier, one’s first impression might be that the cylinder radius should jump to the maximum radius possible. This is not the case, because doing so would enlarge the cross-sectional area (and therefore mass) unnecessarily. Instead, it’s all about minimum wall thickness. As an example, optimizing inner and outer radii given a specified minimum wall thickness:\nAs previously mentioned, you want to squeeze your geometry into as thin of a band as possible to take advantage of the second moment of area without using up too much cross-sectional area.\nNote that if minimum wall thickness were no object (i.e. you could have infinitesimal walls), then the optimal choice would be to maximize your radius! Sadly, we live in the real world, where we have to care about manufacturability or fabricatability.\nWith the given boundary conditions, the deflection limit is the next deciding factor after minimum wall thickness. As an example, optimizing inner and outer radii given a specified maximum deflection:\nOf course, if the deflection limit is high enough, it becomes irrelevant and the shear and tensile stresses become more important.\nSize vs. Strength I have to admit that I was initially left scratching my head after looking at these plots. After all, why would the optimal titanium beam be heavier than the optimal aluminum beam if the specific strength of titanium is greater?\nRecall Equations (5) through (8): the torsional stress, tensile stress, and deflection are all inversely proportional to the 4th power of the radius.\n$$ \\begin{align*} \\tau_{torsion} \\propto \\frac{1}{R^4} \\end{align*} $$ $$ \\begin{align*} \\sigma_{max} \\propto \\frac{1}{R^4} \\end{align*} $$ $$ \\begin{align*} \\delta_{max} \\propto \\frac{1}{R^4} \\end{align*} $$ On the other hand, area (and therefore mass) is proportional to merely the 2nd power of the radius.\n$$ \\begin{align*} A \\propto R^2 \\end{align*} $$ This means that with increasing radius, stress and deflection drop faster than mass increases!\nNow, does this mean we should just 3D print everything out of foaming PLA? In most cases, absolutely not! First of all, keep in mind that this relationship only holds in situations where second moment of area is important. For example, in bending or buckling as opposed to pure compression or tension.\nIn addition, you will usually have more stringent constraints on the bounding box of the design, and once your maximum radius is sufficiently limited, the material with the higher specific strength will win.\nFor example, optimizing for inner radius $r$ only given a specified maximum outer radius $R$:\nYou can see here that second moment of area dominates the beam moment problem overall, but for sufficiently low $R$, titanium wins.\nSo second moment of area can be more important than specific strength… provided you have the space to exploit it.\nReferences [1] BasicStressEqns-DBWallace.pdf\n[2] FE Reference Handbook, 9.4 Edition\n","wordCount":"1603","inLanguage":"en","image":"https://bbokser.github.io/images/2023-04-17/cantilever-force.png","datePublished":"2023-04-17T00:00:00Z","dateModified":"2023-04-17T00:00:00Z","author":{"@type":"Person","name":"Ben Bokser"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bbokser.github.io/posts/2023-04-17/"},"publisher":{"@type":"Organization","name":"Ben Bokser's Blog","logo":{"@type":"ImageObject","url":"https://bbokser.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bbokser.github.io/ accesskey=h title="Ben Bokser (Alt + H)">Ben Bokser</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bbokser.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://bbokser.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://bbokser.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://benbokser.com/ title=Portfolio><span>Portfolio</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://bbokser.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://bbokser.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">On the Optimal Design of Cantilever Beams</h1><div class=post-meta><span title='2023-04-17 00:00:00 +0000 UTC'>April 17, 2023</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Ben Bokser&nbsp;|&nbsp;<a href=https://github.com/bbokser/bbokser.github.io/tree/main/content/posts/2023-04-17.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=eager src=https://bbokser.github.io/images/2023-04-17/cantilever-force.png alt="Forces acting on a cantilevered beam"><p>Cantilevered beam</p></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#the-problem aria-label="The Problem">The Problem</a></li><li><a href=#abstraction aria-label=Abstraction>Abstraction</a></li><li><a href=#choice-of-cross-section aria-label="Choice of Cross-Section">Choice of Cross-Section</a></li><li><a href=#equations aria-label=Equations>Equations</a><ul><li><a href=#shear-stress aria-label="Shear Stress">Shear Stress</a></li><li><a href=#tensile-stress aria-label="Tensile Stress">Tensile Stress</a></li><li><a href=#deflection aria-label=Deflection>Deflection</a></li></ul></li><li><a href=#optimization aria-label=Optimization>Optimization</a></li><li><a href=#materials aria-label=Materials>Materials</a></li><li><a href=#results aria-label=Results>Results</a></li><li><a href=#analysis aria-label=Analysis>Analysis</a></li><li><a href=#size-vs-strength aria-label="Size vs. Strength">Size vs. Strength</a></li><li><a href=#references aria-label=References>References</a></li></ul></div></details></div><div class=post-content><h2 id=the-problem>The Problem<a hidden class=anchor aria-hidden=true href=#the-problem>#</a></h2><p>Let&rsquo;s say we need to design a structural section of a robot arm, as shown.</p><p><img loading=lazy src=/images/2023-04-17/arm-diagram.png></p><p>We&rsquo;ve been given a few requirements:</p><ul><li>The mass of the component must be minimized at all costs.</li><li>The length of the link must be 300 mm.</li><li>The maximum allowed deflection (caused by the component) is 1 mm.</li><li>The combined mass of the maximum payload and end-effector is 30 kg.</li><li>The combined center of mass of the payload and end-effector is 50 mm from the joint.</li><li>Both the base and end-effector joints can rotate in any axis.</li></ul><p>We are allowed to assume that the arm does not move dynamically, so that our analysis can be static-only.</p><p>So how do we optimally design this component?</p><h2 id=abstraction>Abstraction<a hidden class=anchor aria-hidden=true href=#abstraction>#</a></h2><p>Let&rsquo;s start by simplifying the situation by only looking at the worst-case scenario, as shown. In this case, maximum bending moment will be acting along the length of the arm and maximum torsion will be acting on it in the axial direction.</p><p><img loading=lazy src=/images/2023-04-17/arm-diagram-perp.png></p><p>Let&rsquo;s redraw it as a cantilever beam.</p><p><img loading=lazy src=/images/2023-04-17/cantilever-force.png></p><p>Remember what we know from the requirements:</p><ol><li>$L_x = 300 \text{ mm}$</li><li>$L_y = 50 \text{ mm}$</li><li>$m = 30 \text{ kg}$</li></ol><h2 id=choice-of-cross-section>Choice of Cross-Section<a hidden class=anchor aria-hidden=true href=#choice-of-cross-section>#</a></h2><p>Choosing the cross-sectional shape of a cantilever beam is all about maximizing your second moment of area, a major determining factor in both stiffness and strength. On the other hand, you&rsquo;ll also want to minimize cross-sectional area to ensure that the mass of the beam is as low as possible.</p><p>How do we maximize second moment of area while minimizing cross-sectional area? Well, second moment of area can be maximized by locating as much of the shape as far away from the neutral axis as possible, whereas area can be minimized by squeezing that shape into a thin band.</p><p>When bending is expected to occur in only one axis, the best solution is an I-beam. But because this section of the arm has powered rotation about its longitudinal axis, the beam must be able to support an equal load in any direction perpendicular to its length. As such, the cross-sectional shape of choice is a hollow circle, which has the best ratio of second moment of area to area when considering any neutral axis angle.</p><p><img alt=Annulus loading=lazy src=/images/2023-04-17/annulus.png></p><p>Area of a hollow circle:
$$
\begin{equation}
A = \pi(R^2 - r^2)
\end{equation}
$$</p><p>Second moment of area of a hollow circle:
$$ \begin{equation}
I = \frac{\pi}{4} (R^4 - r^4)
\end{equation} $$</p><p>Second polar moment of area of a hollow circle:
$$ \begin{equation}
J = \frac{\pi}{2} (R^4 - r^4)
\end{equation} $$</p><h2 id=equations>Equations<a hidden class=anchor aria-hidden=true href=#equations>#</a></h2><p>Now that we&rsquo;ve simplified the problem down to a cantilever beam with a hollow cylindrical cross-section, we can use several equations that will describe deflection and stress acting on the system.</p><h3 id=shear-stress>Shear Stress<a hidden class=anchor aria-hidden=true href=#shear-stress>#</a></h3><p>Max shear stress for a beam with a thin-walled tube [1]
$$ \begin{equation}
\tau_{beam, max} = \frac{2 F}{A} = \frac{2 F}{\pi (R^2 - r^2)}
\end{equation} $$</p><p>Shear stress due to torsion for a circular shaft [1]
$$ \begin{equation}
\tau_{torsion} = \frac{M_x R}{J} = \frac{F L_y R}{\frac{\pi}{2} (R^4 - r^4)}
\end{equation} $$</p><p>Combining the two to get overall max shear stress:
$$ \begin{equation}
\tau_{max} = \tau_{torsion} + \tau_{beam, max}
\end{equation} $$</p><h3 id=tensile-stress>Tensile Stress<a hidden class=anchor aria-hidden=true href=#tensile-stress>#</a></h3><p>Max tensile stress for a beam due to bending [1]
$$ \begin{equation}
\sigma_{max} = \frac{M_y c}{I} = \frac{F L_x R}{\frac{\pi}{4} (R^4 - r^4)}
\end{equation} $$</p><h3 id=deflection>Deflection<a hidden class=anchor aria-hidden=true href=#deflection>#</a></h3><p><img alt="Deflection of a cantilever beam" loading=lazy src=/images/2023-04-17/deflection.png></p><p>Deflection of a cantilever beam due to a force on the tip [2]
$$ \begin{equation}
\delta_{max} = \frac{F L_x^3}{3 E I} = \frac{F L_x^3}{3 E \frac{\pi}{4} (R^4 - r^4)}
\end{equation} $$</p><h2 id=optimization>Optimization<a hidden class=anchor aria-hidden=true href=#optimization>#</a></h2><p>To evaluate this problem holistically, I&rsquo;ve characterized it as an optimization problem. Our objective is to minimize the cross-sectional area (which is proportional to $R^2 - r^2$) as a function of $R$ and $r$.</p>$$
\begin{align}
\min_{R,r} \quad & R^2 - r^2 \\
\textrm{s.t.} \quad
& \frac{F L_y R}{\frac{\pi}{2} (R^4 - r^4)} + \frac{2 F}{\pi (R^2 - r^2)} - \tau_{max} \leq 0 \\
& F L_x R - \frac{\pi}{4} (R^4 - r^4)\sigma_{max} \leq 0 \\
& F L_x^3 - 3 E \frac{\pi}{4} (R^4 - r^4)\delta_{limit} \leq 0 \\
& r - R + t_{min} \leq 0 \\
& 0.01 \leq R \leq 0.075 \\
& 0.01 \leq r \leq 0.075
\end{align}
$$<p>Where:</p><ul><li>$t_{min}$ is the minimum thickness chosen by the user.</li><li>(10) is the shear stress constraint.</li><li>(11) is the bending stress constraint.</li><li>(12) is the deflection constraint.</li><li>(13) limits the minimum wall thickness.</li><li>(14) and (15) define the min/max dimensions.</li></ul><p>But before we can see how this performs, we need to choose the material.</p><h2 id=materials>Materials<a hidden class=anchor aria-hidden=true href=#materials>#</a></h2><p>Let&rsquo;s look at three of the most popular materials when it comes to lightweight structural design: titanium, aluminum, and CFRP. There&rsquo;s a reason these are the top three: strength-to-weight ratio, AKA specific strength.</p><table><thead><tr><th>Material</th><th>Young&rsquo;s Modulus (Pa)</th><th>Shear Str (Pa)</th><th>Yield Str (Pa)</th><th>Density (kg/m^3)</th></tr></thead><tbody><tr><td><a href=https://www.makeitfrom.com/material-properties/Annealed-Grade-5-Titanium>Annealed Grade 5 Titanium</a></td><td>110e9</td><td>600e6</td><td>910e6</td><td>4430</td></tr><tr><td><a href=https://www.makeitfrom.com/material-properties/7075-T6-Aluminum>Aluminum 7075-T6</a></td><td>70e9</td><td>330e6</td><td>480e6</td><td>2710</td></tr><tr><td><a href=https://dragonplate.com/images/uploaded/pdfs/fiberspecs/34_700_03_2010.pdf>CFRP Tube, 0/90 Ply</a></td><td>132e9</td><td>102e6</td><td>1745e6</td><td>1522</td></tr></tbody></table><p>Bear in mind that there CFRP comes in many flavors: different ply orientations, grades of fabric quality, types of epoxy, and fabrication methods. As such, there can be an absolutely staggering amount of variation in material properties between one CFRP product and the next. For simplicity, I am choosing one particular product, <a href=https://dragonplate.com/carbon-fiber-roll-wrapped-twill-tube-2-id-x-96-thin-wall-gloss-finish>a commonly used CFRP tube from Dragonplate</a>.</p><p>We also need to be extra careful when making theoretical predictions about composites because of their anisotropy. In metals like titanium and aluminum, the yield strength and Young&rsquo;s modulus are basically identical in every direction. But, for example, in CFRP the compressive modulus can be as low as 1/10th of the tensile modulus in some cases. What does this mean for a CFRP beam in bending? Well, a beam in bending is partially in tension and partially in compression, so its equivalent Young&rsquo;s modulus and yield strength are some combination of the composite&rsquo;s tensile and compressive moduli and strengths. This is known as flexural modulus and flexural strength, which is what we should be using here. Furthermore, we should be careful to choose the modulus and strength ratings for the correct ply orientation; in this case 0 degrees.</p><p>As for minimum wall thickness, I found that deciding on $t_{min}$ was very tricky. In the end, I went with the pragmatic approach of checking the minimum tube thicknesses available online for each material. For titanium and aluminum, that&rsquo;s 0.4064 mm (~1/64"), whereas for CFRP it&rsquo;s 0.762 mm (~0.03").</p><p>Note that in the real world, risk of impact to the sides of the tube may drive your required wall thickness up.</p><h2 id=results>Results<a hidden class=anchor aria-hidden=true href=#results>#</a></h2><p>I used <a href=https://nlopt.readthedocs.io/en/latest/NLopt_Python_Reference/>NLOPT</a>, a library for nonlinear optimization, to solve the aforementioned optimization problem. The code can be found <a href=https://github.com/bbokser/beam-opt>here</a>.</p><table><thead><tr><th>Material</th><th>R (mm)</th><th>r (mm)</th><th>Thickness (mm)</th><th>Mass (kg)</th></tr></thead><tbody><tr><td><a href=https://www.makeitfrom.com/material-properties/Annealed-Grade-5-Titanium>Annealed Grade 5 Titanium</a></td><td>34.357</td><td>33.972</td><td>0.385</td><td>0.110</td></tr><tr><td><a href=https://www.makeitfrom.com/material-properties/7075-T6-Aluminum>Aluminum 7075-T6</a></td><td>39.463</td><td>39.063</td><td>0.400</td><td>0.0798</td></tr><tr><td><a href=https://dragonplate.com/images/uploaded/pdfs/fiberspecs/34_700_03_2010.pdf>CFRP Tube, 0/90 Ply</a></td><td>26.442</td><td>25.722</td><td>0.719</td><td>0.0538</td></tr></tbody></table><h2 id=analysis>Analysis<a hidden class=anchor aria-hidden=true href=#analysis>#</a></h2><p>After looking at the equations from earlier, one&rsquo;s first impression might be that the cylinder radius should jump to the maximum radius possible. This is not the case, because doing so would enlarge the cross-sectional area (and therefore mass) unnecessarily. Instead, it&rsquo;s all about minimum wall thickness. As an example, <a href=https://github.com/bbokser/beam-opt/blob/main/src/compare_thmin_mass.py>optimizing inner and outer radii given a specified minimum wall thickness:</a></p><p><img alt="Wall Thickness Comparison" loading=lazy src=/images/2023-04-17/compare-thmin.png></p><p>As previously mentioned, you want to squeeze your geometry into as thin of a band as possible to take advantage of the second moment of area without using up too much cross-sectional area.</p><p>Note that if minimum wall thickness were no object (i.e. you could have infinitesimal walls), then the optimal choice <em>would</em> be to maximize your radius! Sadly, we live in the real world, where we have to care about manufacturability or fabricatability.</p><p>With the given boundary conditions, the deflection limit is the next deciding factor after minimum wall thickness. As an example, <a href=https://github.com/bbokser/beam-opt/blob/main/src/compare_defmax_mass.py>optimizing inner and outer radii given a specified maximum deflection:</a></p><p><img alt="Deflection Limit Comparison" loading=lazy src=/images/2023-04-17/compare-def.png></p><p>Of course, if the deflection limit is high enough, it becomes irrelevant and the shear and tensile stresses become more important.</p><h2 id=size-vs-strength>Size vs. Strength<a hidden class=anchor aria-hidden=true href=#size-vs-strength>#</a></h2><p>I have to admit that I was initially left scratching my head after looking at these plots. After all, <em>why would the optimal titanium beam be heavier than the optimal aluminum beam if the specific strength of titanium is greater?</em></p><p>Recall Equations (5) through (8): the torsional stress, tensile stress, and deflection are all inversely proportional to the 4th power of the radius.</p>$$
\begin{align*}
\tau_{torsion} \propto \frac{1}{R^4}
\end{align*}
$$
$$
\begin{align*}
\sigma_{max} \propto \frac{1}{R^4}
\end{align*}
$$
$$
\begin{align*}
\delta_{max} \propto \frac{1}{R^4}
\end{align*}
$$<p>On the other hand, area (and therefore mass) is proportional to merely the 2nd power of the radius.</p>$$
\begin{align*}
A \propto R^2
\end{align*}
$$<p><strong>This means that with increasing radius, stress and deflection drop faster than mass increases!</strong></p><p>Now, does this mean we should just 3D print everything out of foaming PLA? In most cases, absolutely not! First of all, keep in mind that this relationship only holds in situations where second moment of area is important. For example, in bending or buckling as opposed to pure compression or tension.</p><p>In addition, you will usually have more stringent constraints on the bounding box of the design, and once your maximum radius is sufficiently limited, the material with the higher specific strength will win.</p><p>For example, <a href=https://github.com/bbokser/beam-opt/blob/main/src/compare_thmin_mass.py>optimizing for inner radius $r$ only given a specified maximum outer radius $R$</a>:</p><p><img alt="Wall Thickness Comparison" loading=lazy src=/images/2023-04-17/compare-radius.png></p><p>You can see here that second moment of area dominates the beam moment problem overall, but for sufficiently low $R$, titanium wins.</p><p>So second moment of area can be more important than specific strength&mldr; provided you have the space to exploit it.</p><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><p>[1] <a href=http://faculty.fairfield.edu/wdornfeld/ME311/BasicStressEqns-DBWallace.pdf>BasicStressEqns-DBWallace.pdf</a></p><p>[2] <a href=https://www.cee.msstate.edu/wp-content/NCEES%20FE%20Reference%20Manual%20-%202018.pdf>FE Reference Handbook, 9.4 Edition</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://bbokser.github.io/tags/mechanical/>Mechanical</a></li></ul><nav class=paginav><a class=prev href=https://bbokser.github.io/posts/2024-02-18/><span class=title>« Prev</span><br><span>Intro to Robot Simulation, Part 1: Point Masses</span>
</a><a class=next href=https://bbokser.github.io/posts/2023-04-08/><span class=title>Next »</span><br><span>The Parts Are In!</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share On the Optimal Design of Cantilever Beams on x" href="https://x.com/intent/tweet/?text=On%20the%20Optimal%20Design%20of%20Cantilever%20Beams&amp;url=https%3a%2f%2fbbokser.github.io%2fposts%2f2023-04-17%2f&amp;hashtags=mechanical"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share On the Optimal Design of Cantilever Beams on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fbbokser.github.io%2fposts%2f2023-04-17%2f&amp;title=On%20the%20Optimal%20Design%20of%20Cantilever%20Beams&amp;summary=On%20the%20Optimal%20Design%20of%20Cantilever%20Beams&amp;source=https%3a%2f%2fbbokser.github.io%2fposts%2f2023-04-17%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share On the Optimal Design of Cantilever Beams on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fbbokser.github.io%2fposts%2f2023-04-17%2f&title=On%20the%20Optimal%20Design%20of%20Cantilever%20Beams"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share On the Optimal Design of Cantilever Beams on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fbbokser.github.io%2fposts%2f2023-04-17%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share On the Optimal Design of Cantilever Beams on whatsapp" href="https://api.whatsapp.com/send?text=On%20the%20Optimal%20Design%20of%20Cantilever%20Beams%20-%20https%3a%2f%2fbbokser.github.io%2fposts%2f2023-04-17%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share On the Optimal Design of Cantilever Beams on telegram" href="https://telegram.me/share/url?text=On%20the%20Optimal%20Design%20of%20Cantilever%20Beams&amp;url=https%3a%2f%2fbbokser.github.io%2fposts%2f2023-04-17%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share On the Optimal Design of Cantilever Beams on ycombinator" href="https://news.ycombinator.com/submitlink?t=On%20the%20Optimal%20Design%20of%20Cantilever%20Beams&u=https%3a%2f%2fbbokser.github.io%2fposts%2f2023-04-17%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><div class=giscus><script>function getGiscusTheme(){const e=localStorage.getItem("pref-theme"),t=e==null||e=="light"?"light":"dark";return t}function setGiscusTheme(){function e(e){const t=document.querySelector("iframe.giscus-frame");if(!t)return;t.contentWindow.postMessage({giscus:e},"https://giscus.app")}e({setConfig:{theme:getGiscusTheme()=="light"?"dark":"light"}})}const attrs={src:"https://giscus.app/client.js","data-repo":"bbokser/bbokser.github.io","data-repo-id":"R_kgDOGxN6Pg","data-category":"Announcements","data-category-id":"DIC_kwDOIWVKbs4CSTz_","data-mapping":"title","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getGiscusTheme(),"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(attrs).forEach(([e,t])=>giscusScript.setAttribute(e,t)),document.body.appendChild(giscusScript);const toggle=document.querySelector("#theme-toggle");toggle&&toggle.addEventListener("click",setGiscusTheme)</script><noscript>Please enable JavaScript to view the comments</noscript></article></main><footer class=footer><span>&copy; 2025 <a href=https://bbokser.github.io/>Ben Bokser's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
---
tags: ['gadgets', 'electrical']
comments: true
date: "2025-04-16"
title: "The Persuasive Waker"
ShowToc: true
draft: false
cover:
    image: "/images/2025-04-16/diagram.png"
    alt: "Diagram of the alarm clock"
    relative: false # when using page bundles set this to true
    hidden: true # only hide on current single page
---

# Intro
So I made an open source hardware alarm clock. I know, super basic. But I really wanted this weird feature set that doesn't exist on the market.

[insert video here]

No snooze button, no off button, a backup battery in case you try to unplug it, no way to remove the battery without a hex key, and deactivating it requires hitting a remote key fob. You also can't change the alarm or even the date or time without hitting the remote switch. And the key fob should be hidden as far away from your bed as possible. Obviously this is more effective the larger your home is.

# The Journey
Back in the day, I tried out a bunch of alarm apps that were supposed to force you to wake up by making you solve a puzzle or take a picture of your bathroom or something. Inevitably after setting this up the previous night, I'd wake up the next morning in a groggy haze trying to uninstall the app or something. These apps are, of course, programmed to be impossible to close so that you can't reach the uninstall dialog. They also attempt to prevent the power button from working.

Anyway, I figured this would be a lot nicer as a physical alarm clock, so I cobbled something together out of parts I had lying around. That was the V0. Then I decided to do a PCB, and made the V1. 

![WTF!?](/images/2025-04-16/V0V1.jpg)

The V1 had a bunch of issues, so I went back to the drawing board and made the V2, which was the first version that really functioned the way I wanted it to.

![WTF!?](/images/2025-04-16/V0V1.jpg)

But I liked the V2 so much that I wanted to share the design with my friends. So I made 10 of the V3, with the intent of giving them out to people I knew. 

![WTF!?](/images/2025-04-16/legion.jpg)

This turned out to be a lot more trouble than I had anticipated.

# The Troubles
- I did a really poor job of parts sourcing and ordering efficiently.
- I originally ordered the QIACHIP RX480 receivers from Aliexpress. The first batch I ordered was functional, but the second batch was hot garbage--one was bricked out of the box, and the rest bricked themselves after a couple of days' use. Turned out they were knockoffs. I ordered the real version from QIACHIP's website. They don't even look the same!! Lesson learned.
![WTF!?](/images/2025-04-16/knockoffs.jpg)
- One of the [battery holders]() arrived with its connector's positive and negative terminals reversed! I didn't discover this until I had already plugged it in. Fortunately, I had included in reverse voltage protection...
    ![WTF!?](/images/2025-04-16/battconn.jpg)
- I did not know that JLCPCB likes to mark order numbers on the front of the board. Kind of annoying that it happened to the covers, which are entirely intended for aesthetic purposes.
- I didn't want to deal with the weirdness and wastefulness of JLCPCB's weird consigning system for PCBA--they were going to force me to buy way more parts than I needed--so I only had the boards ordered with the "basic" components assembled (mostly just resistors and caps). This ended up being the worst of both worlds. I was ordering PCBA but also tediously soldering every board. Would not recommend. 
- I should have used a full H-bridge rather than a half-bridge for the buzzer driver; it's not the loudest alarm clock right now.
- There's a rattling sound when you shake the device. Turned out it's coming from the magnetic buzzer. Should replace that.
- CircuitPython ended up being simultaneously really convenient and extremely limiting. Some of Adafruit's libraries have issues I'd have to go deep to fix.
    - The E-paper display library forcefully prevents you from refreshing the screen more than once every 3 minutes. This is a little too babysitter-ish for my taste--if I want to risk reducing my screen's life, that should be up to me. The worst part is that it's written in C, so if I want to change that value I'd have to compile back into a CircuitPython library and then use that.
    - The E-paper display library also lacks partial refresh.
    - I can't seem to retrieve the saved alarm time from the RTC chip.
